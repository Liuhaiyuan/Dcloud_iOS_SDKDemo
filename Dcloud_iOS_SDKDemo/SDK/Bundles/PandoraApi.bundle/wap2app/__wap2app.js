!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){!function(e){if(!e.wap2app){var t="1.0.0";i(2);var n=i(3);n.init();var o=i(4),a=i(6),r=i(7),s=i(8),p=i(9),l=i(10),c=i(11),d=i(12),h=i(13),u=i(16),w=p.globalOptions,f=p.webviewOptions,v=!1,_=l.SCREENSHOT_PATH,b=!1,m=!1,g={},y={},W={},I={},A=function(t){e.__wap2app_init||(e.__wap2app_init=!0,o.plusReady(function(){C(t),L(t);var e=plus.webview.currentWebview(),i=e.id;if(i===plus.runtime.appid){if(e.setStyle({render:"always"}),plus.screen.lockOrientation(g.lockOrientation||"portrait-primary"),R(g.cookies),"file:"===o.getLocation(e.getURL()).protocol)return void S();"function"==typeof g.sms&&setTimeout(function(){B(g.sms)},100),P(),D(),V(i)}else V(i)}))},E=function(t,i,n){var a=plus.webview.currentWebview();if(a.id!==plus.runtime.appid)return void plus.webview.getLaunchWebview().evalJS("wap2app&&wap2app.open('"+t+"','"+a.id+"','"+(n||"")+"')");if(i=i||a.id,n=n||"",!v){var r=function(){t=o.getLocation(t).href;var e=q(t);e.url=t,e.title=n,setTimeout(function(){v=!1},e.group?0:1500),e.isHome?x(t):m=new u(t,e,i),plus.storage.removeItem(l.W2A_WEBVIEW_RELOAD+e.id)};v=!0,e.innerHeight+100<plus.display.resolutionHeight?(document.activeElement.blur(),setTimeout(function(){r()},300)):r()}},T=function(){v||b&&b.back.apply(b)},O=function(){b&&b.quit.apply(b)},k=function(){b&&b.close.apply(b)},x=function(e){setTimeout(function(){for(var e=plus.webview.all(),t=0,i=e.length;i>t;t++){var n=e[t];if("normal"===n.__wap2app_type&&n.id!==plus.runtime.appid){var o=n.parent();o?o.close("none"):n.close("none")}}},20);var t=!1;if(e){var i=W;"boolean"!=typeof i.reload?t=o.isMatch(o.getLocation(e),{pathname:i.reload}):(i.reload||e!==plus.webview.getLaunchWebview().getURL())&&(t=!0)}t&&plus.webview.getLaunchWebview().loadURL(e),plus.webview.getLaunchWebview().show("fade-in",200)},S=function(){var e=plus.webview.currentWebview();e.appendJsFile("_www/__wap2app.js"),e.appendJsFile("_www/__wap2appconfig.js");var t=W.appendJsFile;if("string"==typeof t&&t&&(t=[t]),o.isArray(t))for(var i=0,n=t.length;n>i;i++)t[i]&&e.appendJsFile("_www/"+t[i]);location.replace(W.url)},V=function(e){e||(e=location.href),b||(b=new h(F(e)))},R=function(e){if(e){e=o.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var i=e[t];i.url&&i.name&&c.set(i.url,i.name,i.value,i.expire)}}},B=function(e){"function"==typeof e&&a.register(function(t){for(var i=0,n=t.length;n>i&&!e(t[i].getDisplayMessageBody());i++);})},C=function(e){g=o.extend(w),e.lockOrientation&&(g.lockOrientation=e.lockOrientation),e.cookies&&(g.cookies=e.cookies),e.sms&&(g.sms=e.sms),g.browser=o.extend(g.browser,e.browser),g.browser.header={height:parseInt(g.browser.styles[".header"].height,10)}},L=function(e){I=e.options;for(var t in e.webviews){var i=H(t,e.webviews[t]);if(t=i.quit?plus.runtime.appid:t,i.id=t,i.quit&&(i.isHome=!0,i.styles.render="always",i.styles.popGesture="none",i.network=!0,W=i),y[t]=i,i.group){for(var n=[t],a=i.group.pathname,r=0;r<a.length;r++)n.push(t+"_"+r);var s=n.join(l.W2A_GROUP_SPLIT);for(i.extras.__wap2app_group=s,r=0;r<a.length;r++)y[t+"_"+r]=o.extend(i,{id:t+"_"+r,pathname:a[r],isHome:!1,extras:{__wap2app_group:s}})}}var p=g.browser.webview;if(p.hostname||p.pathname){var i=H(l.W2A_BROWSER_CHILD_ID);i=o.extend(i,p),i.parent="browser",i.styles.top=parseInt(g.browser.header.height,10)+1,i.styles.bottom=0,y[l.W2A_BROWSER_CHILD_ID]=i}},D=function(){var e=plus.webview.getWebviewById(l.W2A_BROWSER_ID);if(!e){e=plus.webview.create("",l.W2A_BROWSER_ID,{hardwareAccelerated:!0,popGesture:"hide"},{__wap2app_type:"parent",__wap2app_parent_type:"browser"}),e.loadData(l.W2A_BROWSER_HTML);var t=function(){var i=[],n=g.browser.styles;for(var o in n)if(n.hasOwnProperty(o)){var a=[],r=n[o];for(var s in r)a.push(s+":"+r[s]+";");i.push(o+"{"+a.join("")+"}")}g.browser.styles=i.join(""),e.evalJS("wap2app_browser.init('"+JSON.stringify(g.browser)+"')"),e.removeEventListener("loaded",t)};e.addEventListener("loaded",t)}},M={},P=function(){_=_+plus.runtime.appid+"/";for(var e in y){var t=y[e].screenshot;t&&t.url&&(M[t.url]=!1)}setTimeout(function(){o.supportNativeObj()&&j(),U()},100)},U=function(){for(var e in M)if(M.hasOwnProperty(e)&&!M[e]){if(M[e]=!0,o.supportNativeObj()){var t=new plus.nativeObj.Bitmap(e);t.load(_+encodeURIComponent(e)+".png",function(){U()}.bind(this),function(i){t.clear(),t=null,N(e)})}else{var i=plus.webview.create("_www/"+e,e,null,{__wap2app_type:"screenshot"});i.addEventListener("loaded",function(){U()})}break}},j=function(){if(!plus.nativeObj.View.getViewById(l.W2A_VIEW_ID)){var e=new plus.nativeObj.View(l.W2A_VIEW_ID);e.show(),e.hide(),"function"==typeof e.interceptTouchEvent&&e.interceptTouchEvent(!0)}if(!plus.nativeObj.View.getViewById(l.W2A_OTHER_VIEW_ID)){var t=new plus.nativeObj.View(l.W2A_OTHER_VIEW_ID);t.show(),t.hide(),"function"==typeof t.interceptTouchEvent&&t.interceptTouchEvent(!0)}plus.nativeObj.Bitmap.getBitmapById(l.W2A_BITMAP_ID)||new plus.nativeObj.Bitmap(l.W2A_BITMAP_ID),plus.nativeObj.Bitmap.getBitmapById(l.W2A_OTHER_BITMAP_ID)||new plus.nativeObj.Bitmap(l.W2A_OTHER_BITMAP_ID)},N=function(t){var i=function(t){var i=t.id;if(!(e.innerHeight+100<plus.display.resolutionHeight)){if("file:///android_asset/data/error.html"===t.getURL())return void t.close("auto");var n=new plus.nativeObj.Bitmap(i);t.draw(n,function(){n.save(_+encodeURIComponent(i)+".png",{},function(){t.close("auto"),U()},function(e){n.clear(),n=null,U()})},function(e){n.clear(),n=null,U()})}},n=plus.webview.getWebviewById(t);n?setTimeout(function(){i(n)},350):(n=plus.webview.create("_www/"+t,t,null,{__wap2app_type:"screenshot"}),n.addEventListener("loaded",function(){setTimeout(function(){i(n)},200)}))},H=function(e,t){"undefined"==typeof t?t=~e.indexOf(l.PARAM_W2A_WEBVIEW_ID)?{id:e}:{id:l.PARAM_W2A_WEBVIEW_ID+Math.random(),url:e}:o.isObject(t)||(t={id:e,pathname:t}),t=o.extend(I,t);var i=o.isObject(t)&&o.isObject(t.back)&&"undefined"!=typeof t.back.history,n=o.isObject(t)&&o.isObject(t.screenshot)&&t.screenshot.title;t=o.extend(f,I,t),"string"==typeof t.back&&(t.back=o.extend(f.back,{selector:t.back})),"string"==typeof t.screenshot&&(t.screenshot=o.extend(f.screenshot,{url:t.screenshot})),t.screenshot.title&&("boolean"==typeof t.screenshot.title&&(t.screenshot.title=o.extend(f.screenshot.title,{enable:!0})),n&&o.isObject(t.screenshot.title)&&(t.screenshot.title.enable=!0)),t.screenshot.drawText&&o.isObject(t.screenshot.drawText)&&(t.screenshot.drawText=[t.screenshot.drawText]),t.overrideUrlLoading&&t.overrideUrlLoading.close&&(o.isObject(t.overrideUrlLoading.close)||(t.overrideUrlLoading.close=o.extend(f.overrideUrlLoading.close,{pathname:t.overrideUrlLoading.close}))),"boolean"==typeof t.gps&&(t.gps=o.extend(f.gps,{enable:t.gps})),!i&&"webview"===t.mode&&o.isArray(t.pathname)&&(t.back.history=!1);var a=t.group,r=!1;if(a&&o.isArray(a.pathname)&&a.pathname.length){var s=a.pathname;t.group.pathname=s,a.drawText&&o.isObject(a.drawText)&&(t.group.drawText=[a.drawText]),t.styles.render="always",r=!0}r||(t.group=!1);var p={__wap2app_type:t.quit?"home":"normal"};return t.extras=o.extend(t.extras,p),"browser"===t.parent&&(t.styles.top=parseInt(g.browser.header.height,10)+1,t.styles.bottom=0),t},q=function(e){var t=!1,i=o.getLocation(e);if(t=G(i))return t;var n=g.browser.webview;return(n.hostname||n.pathname)&&o.isMatch(i,n)?F(l.W2A_BROWSER_CHILD_ID):H(e)},G=function(e){for(var t in y){var i=y[t];if(o.isMatch(e,i))return i}return!1},F=function(e){return y[e]||H(e)},J=function(e){o.domReady(function(){var t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)})},X=function(e){var t=plus.webview.getWebviewById(e);t&&(plus.storage.setItem(l.W2A_WEBVIEW_RELOAD+e,"TRUE"),t.reload())};e.wap2app={version:t,SPA:r,now:o.now,init:A,open:E,quit:O,back:T,close:k,reload:X,trigger:o.trigger,plusReady:o.plusReady,domReady:o.domReady,extend:o.extend,getStyles:o.getStyles,getCookie:c.get,setCookie:c.set,removeCookie:c.remove,injectStyle:J,getLocation:o.getLocation,share:{init:s.init,open:function(e,t,i){"string"==typeof e&&(e=JSON.parse(e)),s.open(e,t,i)}},getHomeWebviewOptions:function(){return W},getWebviewOptions:function(){return y},getWebviewOptionsByUrl:q,isConfiged:function(e){var t=G(o.getLocation(e));return!(!t||t.id===l.W2A_BROWSER_CHILD_ID)},currentW2AWebview:function(){return b},createW2AView:function(e,t,i){return new d(e,i||plus.webview.currentWebview().id,t)}}}}(window)},function(e,t){Function.prototype.bind=Function.prototype.bind||function(e){var t=Array.prototype.splice.call(arguments,1),i=this,n=function(){var o=t.concat(Array.prototype.splice.call(arguments,0));return this instanceof n?void i.apply(this,o):i.apply(e,o)};return n.prototype=i.prototype,n}},function(e,t,i){var n=i(4).plusReady,o=i(5),a=function(e){if(navigator.userAgent.match(/Html5Plus/i)){navigator.geolocation.clearWatch=function(e){n(function(){plus.geolocation.clearWatch(e)})},navigator.geolocation.getCurrentPosition=function(e,t,i){n(function(){+new Date;plus.geolocation.getCurrentPosition(function(t){e(o.stream&&o.qihoo?t:r(t))},t,i)})},navigator.geolocation.watchPosition=function(e,t,i){n(function(){plus.geolocation.watchPosition(e,t,i)})};var t=3.141592653589793,i=6378245,a=.006693421622965943,r=function(e){if("gcj02"===e.coordsType){var t=s(e.coords.longitude,e.coords.latitude);e.coords.longitude=t[0],e.coords.latitude=t[1]}return e},s=function(e,n){if(c(e,n))return[e,n];var o=p(e-105,n-35),r=l(e-105,n-35),s=n/180*t,d=Math.sin(s);d=1-a*d*d;var h=Math.sqrt(d);return o=180*o/(i*(1-a)/(d*h)*t),r=180*r/(i/h*Math.cos(s)*t),mglat=n+o,mglng=e+r,[2*e-mglng,2*n-mglat]},p=function(e,i){var n=-100+2*e+3*i+.2*i*i+.1*e*i+.2*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*t)+20*Math.sin(2*e*t))/3,n+=2*(20*Math.sin(i*t)+40*Math.sin(i/3*t))/3,n+=2*(160*Math.sin(i/12*t)+320*Math.sin(i*t/30))/3},l=function(e,i){var n=300+e+2*i+.1*e*e+.1*e*i+.1*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*t)+20*Math.sin(2*e*t))/3,n+=2*(20*Math.sin(e*t)+40*Math.sin(e/3*t))/3,n+=2*(150*Math.sin(e/12*t)+300*Math.sin(e/30*t))/3},c=function(e,t){return 72.004>e||e>137.8347||.8293>t||t>55.8271||!1}}};e.exports={init:a}},function(e,t){function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("Events"),n=!0;for(var o in t)"bubbles"===o?n=!!t[o]:i[o]=t[o];return i.initEvent(e,n,!0),i}var n=Array.isArray||function(e){return e instanceof Array},o=function(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype},a=function(e,t){if(t)for(var i in t){var n=e[i],r=t[i];o(r)?e[i]=a(n&&o(n)?n:{},r):"undefined"!==r&&(e[i]=r)}return e},r=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];i&&o(i)&&a(e,i)}return e},s=function(e,t,i){return"string"==typeof t?t===e:"function"==typeof t?t(e,i):n(t)?~t.indexOf(e):t instanceof RegExp?t.test(e):!1},p=function(e,t){var i=!0;return t.hostname&&(i=s(e.hostname,t.hostname,e),null!==i&&!i)?!1:t.pathname&&(i=s(e.pathname,t.pathname,e),null!==i&&!i)?!1:t.title&&e.title&&(i=s(e.title,t.title,e),null!==i&&!i)?!1:i},l=["hash","host","hostname","href","origin","pathname","port","protocol","search"],c=document.createElement("a"),d=function(e,t){c.href=e;for(var i={title:t},n=0,o=l.length;o>n;n++){var a=l[n];i[a]=c[a]}return i},h=function(e){window.plus?e():document.addEventListener("plusready",function(){e()},!1)},u=/complete|loaded|interactive/,w=function(e){u.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(){e()},!1)},f=/\+/g,v=/([^&=]+)=?([^&]*)/g,_=function(e){var t={};if(e=e&&(0===e.indexOf("?")?e.replace("?",""):e))for(var i;i=v.exec(e);)t[b(i[1])]=b(i[2]);return t},b=function(e){return decodeURIComponent(e.replace(f," "))},m=function(e,t){var i=_(t||location.search);return i.hasOwnProperty(e)?i[e]:""},g=function(e,t){var i=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?i.getPropertyValue(t)||i[t]:i},y=Date.now||function(){return(new Date).getTime()},W=function(e,t,i){var n,o,a,r,s=0;i||(i={});var p=function(){s=i.leading===!1?0:y(),n=null,r=e.apply(o,a),n||(o=a=null)},l=function(){var l=y();s||i.leading!==!1||(s=l);var c=t-(l-s);return o=this,a=arguments,0>=c||c>t?(n&&(clearTimeout(n),n=null),s=l,r=e.apply(o,a),n||(o=a=null)):n||i.trailing===!1||(n=setTimeout(p,c)),r};return l.cancel=function(){clearTimeout(n),s=0,n=o=a=null},l},I=function(){return!("Android"!==plus.os.name||!plus.nativeObj.hasOwnProperty("View"))};"undefined"==typeof window.CustomEvent&&(i.prototype=window.Event.prototype,window.CustomEvent=i);var A=function(e,t,n){e&&e.dispatchEvent(new i(t,{detail:n,bubbles:!0,cancelable:!0}))},E=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1};e.exports={now:y,isObject:o,isArray:n,isMatch:p,extend:r,trigger:A,throttle:W,domReady:w,plusReady:h,getStyles:g,parseParams:_,getUrlParam:m,getLocation:d,elementMatch:E,supportNativeObj:I}},function(e,t){var i={android:!1,ios:!1,plus:!1,stream:!1,qihoo:!1},n=navigator.userAgent;n.match(/(Android);?[\s\/]+([\d.]+)?/)?i.android=!0:n.match(/(iPhone\sOS)\s([\d_]+)/)&&(i.ios=!0),n.match(/Html5Plus/i)&&(i.plus=!0,n.match(/StreamApp/i)&&(i.stream=!0,n.match(/Qihoo/i)&&(i.qihoo=!0))),e.exports=i},function(e,t,i){var n,o,a,r=i(4).plusReady,s=[],p=!1,l=!1,c=!1,d=function(e){if("Android"===plus.os.name)try{var t=plus.runtime.innerVersion.split(".");c=parseInt(t[t.length-1])<22298,a=plus.android.runtimeMainActivity();var i=(plus.android.importClass("android.content.Intent"),plus.android.importClass("android.content.IntentFilter")),r=plus.android.importClass("android.telephony.SmsMessage"),p="io.dcloud.feature.internal.reflect.BroadcastReceiver";c&&(p="io.dcloud.feature.internal.a.a"),o=new i;var l=function(e,t){try{var i=t.getAction();if("android.provider.Telephony.SMS_RECEIVED"==i){for(var n=t.getSerializableExtra("pdus"),o=[],a=0,p=n.length;p>a;a++)o.push(r.createFromPdu(n[a]));for(var a=0,p=s.length;p>a;a++)s[a](o)}}catch(l){}};n=plus.android["implements"](p,{a:l,onReceive:l}),o.addAction("android.provider.Telephony.SMS_RECEIVED"),e&&e()}catch(d){}},h=function(e){if(s.push(e),p){if(!l)try{c?a.a(n,o):a.registerReceiver(n,o)}catch(t){}}else p=l=!0,r(function(){d(function(){setTimeout(function(){try{c?a.a(n,o):a.registerReceiver(n,o)}catch(e){}},300)})})},u=function(e,t){for(var i=0,o=s.length;o>i;i++)s[i]===e&&s.splice(i,1);if(t&&!s.length&&a&&l){try{c?a.a(n):a.unregisterReceiver(n)}catch(r){}l=!1}};e.exports={register:h,unregister:u}},function(e,t,i){var n=[],o=function(e,t){var i=wap2app.getWebviewOptionsByUrl(e);if(!i.screenshot||!i.screenshot.url)return void(t&&t(!1));var o=function(){var e=wap2app.createW2AView(i.screenshot.url,i.screenshot);e.show(i.show.aniShow,i.show.duration,function(n){n?t&&t(!0):t&&t(!1),setTimeout(function(){e.close(i.screenshot.animation.type,i.screenshot.animation.duration,function(){setTimeout(function(){e.clear()},i.screenshot.animation.delay)})},i.delay)})},a=new plus.nativeObj.Bitmap(e);plus.webview.currentWebview().draw(a,function(){n.push(e),o()},function(){a.clear(),a=null,n.push(!1),o()})},a=function(e,t,i,o){e=e||"pop-out",t=t||200,o=_.extend({showWaiting:!1,delay:200,animation:{type:"shrink",duration:200,delay:0,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"}}},o);var a=n.pop();if(a){var r=wap2app.createW2AView(a,{animation:o.animation});r.show(e,t,function(e){e?i&&i(!0):i&&i(!1),o.showWaiting&&plus.nativeUI.showWaiting(),setTimeout(function(){r.close("shrink",200,function(){r.clear();var e=plus.nativeObj.Bitmap.getBitmapById(a);e&&e.clear(),o.showWaiting&&plus.nativeUI.closeWaiting()})},o.delay)})}else i&&i(!1)};e.exports={open:o,back:a}},function(e,t,i){function n(e,t,i){var n=l[e];return n?void(n.authenticated?o(n,t,i):n.authorize(function(){o(n,t,i)},function(e){plus.nativeUI.alert("\u8ba4\u8bc1\u6388\u6743\u5931\u8d25"),i&&i(!1)})):(plus.nativeUI.alert("\u65e0\u6548\u7684\u5206\u4eab\u670d\u52a1["+e+"]"),void(i&&i(!1)))}function o(e,t,i){e.send(t,function(){plus.nativeUI.toast('\u5206\u4eab\u5230"'+e.description+'"\u6210\u529f\uff01'),i&&i(!0)},function(t){plus.nativeUI.toast('\u5206\u4eab\u5230"'+e.description+'"\u5931\u8d25\uff01'),i&&i(!1)})}function a(e,t,i){p.android&&d||t&&t(!1);var n=plus.android.importClass("android.content.Intent");if(s&&n){var o=new n(n.ACTION_SEND);o.setType("text/plain"),o.putExtra(n.EXTRA_TEXT,e.content),o.setFlags(n.FLAG_ACTIVITY_NEW_TASK),s.startActivity(n.createChooser(o,i||"\u7cfb\u7edf\u5206\u4eab")),t&&t(!0)}else t&&t(!1)}function r(e,t,i){d||t&&t(!1),!c&&l.weixin?plus.nativeUI.actionSheet({title:i||"\u5206\u4eab\u5230",cancel:"\u53d6\u6d88",buttons:[{title:"\u5fae\u4fe1\u6d88\u606f"},{title:"\u5fae\u4fe1\u670b\u53cb\u5708"},{title:"\u66f4\u591a\u5206\u4eab"}]},function(o){var r=o.index;switch(r){case 1:e.extra={scene:"WXSceneSession"},n("weixin",e,t);break;case 2:e.title=e.content,e.extra={scene:"WXSceneTimeline"},n("weixin",e,t);break;case 3:a(e,t,i)}}):a(e,t)}var s,p=i(5),l={},c=!1,d=!1,h=function(){var e=plus.runtime.innerVersion.split(".");c=e[e.length-1]<20133,p.android&&(s=plus.android.runtimeMainActivity()),c||plus.share.getServices(function(e){for(var t=0,i=e.length;i>t;t++){var n=e[t];l[n.id]=n}}),d=!0};e.exports={init:h,open:r,openSystem:a}},function(e,t){e.exports={globalOptions:{lockOrientation:"portrait-primary",options:{},webviews:{},cookies:!1,sms:!1,browser:{webview:{mode:"history",hostname:!1,pathname:!1,reload:!0},styles:{".header":{height:"44px","background-color":"#efefef"},".back,.close":{color:"#8e8e93"},".title":{color:"#252525"},".progressbar":{"background-color":"#b6b6b6"},".progressbar span":{"background-color":"#ed2e2b"}}},pullToRefresh:{webview:{hostname:!1,pathname:!1}}},webviewOptions:{mode:"webview",url:"",quit:!1,hostname:!1,pathname:!1,group:{pathname:!1,placeholder:"#fff",activate:{container:!1,itemMatch:!1,itemActiveClass:!1,activate:!1,deactivate:!1},drawText:{text:"",dst:{top:0,left:0,width:"100%",height:"100%"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},animation:{type:"shrink",duration:200,frames:12,region:{top:0,bottom:0,left:0,right:0}}},styles:{popGesture:"close",hardwareAccelerated:!0},fixed:{selector:"",styles:!1},extras:!1,network:!1,ignore:!1,overrideUrlLoading:{handle:!1,ignore:!1,replace:!1,close:{delay:350,pathname:!1}},appendJsFile:!1,delay:300,show:{eventType:"titleUpdate",aniShow:"pop-in",duration:300},showWaiting:!0,screenshot:{url:!1,title:{enable:!1,filter:!1,dst:{top:"0px",left:"0px",width:"100%",height:"44px"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},drawText:{text:"",dst:{top:"0px",left:"0px",width:"100%",height:"100%"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},animation:{type:"shrink",duration:200,delay:0,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"}}},parentWebview:!1,back:{delay:200,showWaiting:!1,handle:!1,enable:!0,backbutton:!0,override:!0,history:!0,selector:"",eventType:"click",beforeBack:!1,reload:!1,animation:{type:"shrink",duration:200,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"}}},loading:!1,loaded:!1,reload:!1,pullToRefresh:{support:!0,height:"100px",range:"300px",contentdown:{caption:"\u4e0b\u62c9\u53ef\u4ee5\u5237\u65b0"},contentover:{caption:"\u91ca\u653e\u7acb\u5373\u5237\u65b0"},contentrefresh:{caption:"\u6b63\u5728\u5237\u65b0..."}},injectStyle:!1,injectScript:!1,gps:{enable:!1,interval:1440,disabledMsg:"\u672c\u673a\u672a\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd\uff0c\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd",forbiddenMsg:"\u5c1a\u672a\u8d4b\u4e88\u83b7\u53d6\u4f4d\u7f6e\u7684\u6743\u9650\u3002\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\uff0c\u7ed9{app}\u8d4b\u4e88\u5b9a\u4f4d\u6743\u9650"},share:{enable:!1,content:"",thumbs:[],href:"",title:""}}}},function(e,t){e.exports={SCREENSHOT_PATH:"_www/__wap2app/screenshot/",PARAM_W2A_WEBVIEW_ID:"__W2A_WEBVIEW_ID_",W2A_WEBVIEW_LOADING:"__W2A_WEBVIEW_LOADING_",W2A_WEBVIEW_BACKING:"__W2A_WEBVIEW_BACKING_",W2A_WEBVIEW_RELOAD:"__W2A_WEBVIEW_RELOAD_",W2A_BITMAP_ID:"__W2A_BITMAP",W2A_OTHER_BITMAP_ID:"__W2A_OTHER_BITMAP",W2A_VIEW_ID:"__W2A_VIEW",W2A_OTHER_VIEW_ID:"__W2A_OTHER_VIEW",W2A_GROUP_SPLIT:"__W2A_GROUP__",W2A_BROWSER_ID:"__W2A_BROWSER_",W2A_OVERRIDE_IGNORE:["tel","mailto:","callto:","weixin:","alipay:","alipayqr:"],W2A_OVERRIDE_MATCH:"^(http|https|ftp|tel|mailto|callto|weixin|alipay|alipayqr).*",W2A_BROWSER_CHILD_ID:"__W2A_WEBVIEW_ID_BROWSER_CHILD_",W2A_GPS_TIME:"__W2A_GPS_TIME",W2A_BROWSER_HTML:'<!DOCTYPE html>\n<html>\n<head>\n<meta charset=UTF-8>\n<meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">\n<style>*{margin:0;padding:0}.header{position:relative;height:44px;color:#252525;background-color:#efefef;border-bottom:1px solid #b6b6b6}.back,.close{display:block;position:absolute;top:12px;width:12px;height:20px}.back{left:15px;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D\'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg\'%20viewBox%3D\'0%200%2012%2020\'%3E%3Cpath%20d%3D\'M10%2C0l2%2C2l-8%2C8l8%2C8l-2%2C2L0%2C10L10%2C0z\'%20fill%3D\'%238e8e93\'%2F%3E%3C%2Fsvg%3E")}.close{left:45px;width:20px;display:none}.close::before,.close::after{content:\'\';position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:#8e8e93}.close::before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.close::after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.title{position:absolute;left:70px;right:60px;text-align:center;height:44px;line-height:44px;font-size:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:normal}.progressbar{position:absolute;top:43px;display:none;width:100%;height:2px;overflow:hidden;vertical-align:middle;background:#b6b6b6;border-radius:2px;-webkit-transform-origin:center top;transform-origin:center top;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;position:absolute}.progressbar span{position:absolute;top:0;left:0;width:100%;height:100%;background:#ed2e2b;-webkit-transition:150ms;transition:150ms;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.loading .progressbar{display:block}@-webkit-keyframes progressbar-infinite{0%{-webkit-transform:translate3d(-50%,0,0) scaleX(.5)}100%{-webkit-transform:translate3d(100%,0,0) scaleX(.5)}}@keyframes progressbar-infinite{0%{transform:translate3d(-50%,0,0) scaleX(.5)}100%{transform:translate3d(100%,0,0) scaleX(.5)}}</style>\n<style id=wap2app_browser_style></style>\n</head>\n<body class=loading>\n<header class=header>\n<span class=back></span>\n<span class=close></span>\n<h1 class=title></h1>\n</header>\n<div class=progressbar><span></span></div>\n<script>(function(i){var e=false;var a=0;var b=60;var g=0;var h=document.querySelector(".back");var j=document.querySelector(".close");var c=document.querySelector(".title");var l=document.querySelector(".progressbar");var k=l.querySelector("span").style;var f={init:function(m){if(typeof m==="string"){m=JSON.parse(m)}this.options=m||{};var n=document.getElementById("wap2app_browser_style");n.innerHTML=this.options.styles},setTitle:function(m){c.innerText=decodeURIComponent(m)},showClose:function(){j.style.display="block"},loading:function(m){document.body.className="loading";m=m||0;if(!m){k.webkitTransform="translate3d(-90%,0,0)"}g=setTimeout(function(){m+=Math.random()*20;k.webkitTransform="translate3d("+(-100+m)+"%,0,0)";if(m<b){f.loading(m)}else{g=setTimeout(function(){f.loaded()},2000)}},Math.random()*200+200)},loaded:function(){g&&clearTimeout(g);k.webkitTransform="translate3d(0,0,0)";setTimeout(function(){k.webkitTransform="translate3d(-100%,0,0)";document.body.className="loaded"},100)},reset:function(){j.style.display="none";c.innerText="";k.webkitTransform="translate3d(-100%,0,0)"}};i.wap2app_browser=f;h.addEventListener("click",function(){e&&e.children()[0].evalJS("wap2app.back();")});j.addEventListener("click",function(){e&&e.children()[0].evalJS("wap2app.close();")});var d=function(){e=plus.webview.currentWebview()};if(i.plus){d()}else{document.addEventListener("plusready",d)}})(window);</script>\n</body>\n</html>'}},function(e,t){var i=function(e,t,i,n){n=n||1;var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var a="expires="+o.toUTCString();plus.navigator.setCookie(e,t+"="+i+"; "+a)},n=function(e,t){var i=t+"=",n=plus.navigator.getCookie(e);if(n){n=n.split(";");for(var o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(i))return a.substring(i.length,a.length)}}return""},o=function(e,t){i(domain,t,"",-1)};e.exports={set:i,get:n,remove:o}},function(e,t,i){var n=i(4),o=i(10),a=function(e,t,i){this.id=e,this.webviewId=t,this.options=i,this.view=!1,this.bitmap=!1,this.visible=!1,this.animated=!1,this.title=!1,this.aniShow="pop-in",this.reset(),this._init()},r=a.prototype;r._init=function(){this.bitmap=plus.nativeObj.Bitmap.getBitmapById(this.id),this.bitmap&&(this.view=plus.nativeObj.View.getViewById(o.W2A_VIEW_ID))},r.setTitle=function(e){e&&!this.title&&(this.title=e,this._drawTexts(this.view,[n.extend(this.options.title,{text:e})]))},r.show=function(e,t,i){if(this.aniShow=e,!this.view)return this.visible=!1,i&&i(!1),!1;if(!e||"none"===e){if(this.webviewId){var n=plus.webview.getWebviewById(this.webviewId);n=n.parent()||n,n.draw(this.bitmap,function(){this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),this._drawRect(),this._drawTexts(this.view,this.options.drawText),this.view.show(),i&&i(!0)}.bind(this),function(e){this.visible=!1,i&&i(!1)})}else this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),this._drawRect(),this._drawTexts(this.view,this.options.drawText),this.view.show(),i&&i(!0);return!0}this.relatedView=plus.nativeObj.View.getViewById(o.W2A_OTHER_VIEW_ID);var a=plus.nativeObj.Bitmap.getBitmapById(o.W2A_OTHER_BITMAP_ID);if(this.relatedView&&a){var n=plus.webview.getWebviewById(this.webviewId);n=n.parent()||n;var r=function(n){this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),n&&this.relatedView.drawBitmap(n),this._drawTexts(this.view,this.options.drawText);var o=this.relatedView,a=this.view;"pop-out"===e&&(o=this.view,a=this.relatedView),plus.nativeObj.View.startAnimation({type:e,duration:t},o,a),i&&i(!0)};n.draw(a,function(){r.call(this,a)}.bind(this),function(t){"pop-in"===e||"pop-out"===e?r.call(this,!1):(this.visible=!1,i&&i(!1))}.bind(this))}else this.visible=!1,i&&i(!1)},r.close=function(e,t,i){if(this.visible){var n=this.options.animation,o="pop-out"===this.aniShow&&this.relatedView?this.relatedView:this.view;o.animate({type:e,duration:t,frames:n.frames,region:n.region},function(){this.animated=!0,i&&i(!0)}.bind(this))}else i&&i(!1)},r.clear=function(){this.visible&&(this.animated?(plus.nativeObj.View.clearAnimation(),this.hide(),this.reset(),this.visible=!1):setTimeout(function(){this.clear()}.bind(this),200))},r.hide=function(){var e=plus.nativeObj.View.getViewById(o.W2A_VIEW_ID);e&&e.hide(),e=plus.nativeObj.View.getViewById(o.W2A_OTHER_VIEW_ID),e&&e.hide()},r.reset=function(){var e=plus.nativeObj.View.getViewById(o.W2A_VIEW_ID);e&&e.reset(),e=plus.nativeObj.View.getViewById(o.W2A_OTHER_VIEW_ID),e&&e.reset()},r._drawRect=function(){if(this.options.pathname){var e=this.options.placeholder,t=this.options.animation.region,i=this._getDst(t.top),n=this._getDst(t.bottom);this.view.drawRect(e,{top:i,height:window.innerHeight-i-n})}},r._getDst=function(e){if("number"==typeof e)return parseInt(e,10);if("string"==typeof e){if(-1!==e.indexOf("px",e.length-2))return parseInt(e,10);var t=document.querySelector(e);return t&&t.offsetHeight||0}if("function"==typeof e){var e=parseInt(e(),10);return e||0}return 0},r._drawTexts=function(e,t){if("function"==typeof t&&(t=t(),t&&n.isObject(t)&&(t=[t])),t&&n.isArray(t)&&t.length)for(var i=0;i<t.length;i++){var o=t[i];if(o.text){var a=o.text;"function"==typeof a&&(a=a()),a&&e.drawText(a,o.dst,o.styles)}}},e.exports=a},function(module,exports,__webpack_require__){var _=__webpack_require__(4),gps=__webpack_require__(14),spa=__webpack_require__(7),Const=__webpack_require__(10),W2AWebview=function(e){this._init(e)},proto=W2AWebview.prototype;proto._init=function(e){this.webview=!1,this.options=e,this._initWebview()},proto._initWebview=function(){var options=this.options;if(_.plusReady(function(){this.webview=plus.webview.currentWebview();var e=this.webview.__wap2app_opener_id;this.opener=e?plus.webview.getWebviewById(e):!1,this.opener&&(document.referrer=this.opener.getURL()),this._handleBack(),this._handleOverrideUrlLoading(),this._handleGps()}.bind(this)),options.injectStyle&&_.domReady(function(){var e=document.createElement("style");e.appendChild(document.createTextNode(options.injectStyle)),document.head.appendChild(e)}),options.injectScript)try{"function"==typeof options.injectScript?(options.injectScript=Function.prototype.toString.call(options.injectScript),eval("("+options.injectScript+")()")):eval("("+options.injectScript+")")}catch(e){console.log(e)}setTimeout(function(){_.domReady(function(){options.group&&options.group.activate&&this._handleGroupActivate(options.group.activate),this._handleFixed()}.bind(this))}.bind(this),200)},proto._handleGps=function(){var e=this.options;if(e.gps.enable){var t=plus.storage.getItem(Const.W2A_GPS_TIME);(!t||_.now()-parseInt(t,10)>60*e.gps.interval*1e3)&&setTimeout(function(){this._checkGps()}.bind(this),10)}},proto._checkGps=function(){var e=this.options.gps;gps.isEnabled(e.disabledMsg)?gps.checkPermission(function(){this.webview.reload()}.bind(this),e.forbiddenMsg)&&plus.storage.setItem(Const.W2A_GPS_TIME,_.now()+""):plus.storage.setItem(Const.W2A_GPS_TIME,_.now()+"")},proto._handleGroupActivate=function(e){if(e&&_.isObject(e)&&e.container&&e.itemMatch&&e.itemActiveClass){var t=document.querySelector(e.container);if(t){for(var i=e.activate,n=e.deactivate,o=e.itemMatch,a="",r=e.itemActiveClass||"",s=e.itemActiveClass.split(" "),p=0;p<s.length;p++)a+="."+s[p].replace(/\s+/g,"");i||(i=function(e){for(var i=e;i&&i!==t;i=i.parentNode)if(_.elementMatch(i,o)){i.className=r;break}}),n||(n=function(e){for(var i=e;i&&i!==t;i=i.parentNode)if(_.elementMatch(i,o)){i.className=i.className.replace(r,"");break}});var l=t.querySelector(a),c={};t.addEventListener("click",function(e){for(var t=e.target;t&&t!==document;t=t.parentNode)if("A"===t.tagName&&t.href){e.preventDefault(),e.stopPropagation(),c[t.href]||(n(l),i(t),function(e,t){setTimeout(function(){n(t),i(e)},150)}(l,t),c[t.href]=!0),function(e){setTimeout(function(){wap2app.open(e.href)},10)}(t);break}}.bind(this),!0)}}},proto._handleFixed=function(){var e=this.options.fixed;_.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];if(_.isObject(i)&&i.selector){var n=document.querySelector(i.selector);if(n){var o=_.getStyles(n,"position");if("fixed"!==o){var a=i.styles;if(a)for(var r in a)a.hasOwnProperty(r)&&(n.style[r]=a[r]);n.style.position="fixed";var s=document.createElement("div");s.className="__wap2app_fixed_placeholder",s.setAttribute("style","height:"+n.offsetHeight+"px;width:100%;"),n.parentNode.insertBefore(s,n)}}}}},proto._handleOverrideUrlLoading=function(){var e=this.options;if("function"==typeof this.webview.overrideUrlLoading&&e.overrideUrlLoading!==!1){var t=e.overrideUrlLoading.ignore;this.webview.overrideUrlLoading({mode:"reject",match:".*"},function(i){var n=e.overrideUrlLoading.handle;if("function"==typeof n){var o=n(i.url);o&&"string"==typeof o&&(i.url=o)}var a=_.getLocation(i.url);~Const.W2A_OVERRIDE_IGNORE.indexOf(a.protocol)?(this.webview.overrideUrlLoading({mode:"allow",match:Const.W2A_OVERRIDE_MATCH}),setTimeout(function(){location.href=i.url},50)):"history"===e.mode?wap2app.isConfiged(i.url)?this.open(i.url):(this.webview.overrideUrlLoading({
mode:"allow",match:Const.W2A_OVERRIDE_MATCH}),setTimeout(function(){var e=this._isReplace(a);e?location.replace(i.url):location.href=i.url}.bind(this),50)):this._handleIgnore(i.url,t)}.bind(this))}},proto._handleIgnore=function(e,t){var i=this.options,n=!1,o=i.ignore,a=i.group,r=_.getLocation(e);if(~["http:","https:","file:"].indexOf(r.protocol)){if(o&&(n=_.isMatch(r,{pathname:o})),n===!1&&t&&(n=_.isMatch(r,{pathname:t},i)),n===!1&&a&&_.isMatch(r,{pathname:a.pathname}))return void this.open(e);n===!1&&i.pathname&&_.isMatch(r,i)&&(n=!0),null!==n&&(n?(this.webview.overrideUrlLoading({mode:"allow",match:Const.W2A_OVERRIDE_MATCH}),setTimeout(function(){var t=this._isReplace(r);if(t)location.replace(e);else{var n=!1;"boolean"!=typeof i.reload?n=_.isMatch(_.getLocation(i.url),{pathname:i.reload}):(i.reload||i.url!==this.webview.getURL())&&(n=!0),location.href!==e||n?location.href=e:r.hash!==location.hash&&location.reload()}}.bind(this),50)):(i.overrideUrlLoading&&i.overrideUrlLoading.close&&i.overrideUrlLoading.close.pathname&&_.isMatch(r,{pathname:i.overrideUrlLoading.close.pathname})&&setTimeout(function(){var e=this.webview.parent();e||(e=this.webview),e.close("none",0)}.bind(this),i.overrideUrlLoading.close.delay),this.open(e)))}},proto._isReplace=function(e){var t=!1,i=this.options.overrideUrlLoading.replace;return"boolean"==typeof i?t=i:i&&(t=_.isMatch(e,{pathname:i})),t},proto._handleBack=function(){this.options.back.enable&&(this._overrideHistory(),this._handleBackClick(),this.options.back.backbutton&&this._handleBackButtonClick(),this.opener&&plus.storage.removeItem(Const.W2A_WEBVIEW_LOADING+this.opener.id))},proto._handleBackButtonClick=function(){plus.key.addEventListener("backbutton",function(){this.back()}.bind(this))},proto._handleBackClick=function(){var e=this.options.back,t=e.selector;t&&window.addEventListener(e.eventType,function(e){var i=document.querySelectorAll(t);if(i&&i.length)for(var n=e.target;n&&n!==document;n=n.parentNode)for(var o=0,a=i.length;a>o;o++)if(n===i[o])return this.back(),e.preventDefault(),e.stopPropagation(),!0}.bind(this),!0)},proto._overrideHistory=function(){if(this.options.back.override){var e=this,t=function(t){return function(i){location.hash?t.apply(window.history,[i]):e.back()}};window.history.back=t(window.history.back),window.history.go=t(window.history.go)}},proto._handleBackClose=function(e,t,i){if(e.__wap2app_group)for(var n=e.__wap2app_group.split(Const.W2A_GROUP_SPLIT),o=0;o<n.length;o++){var a=n[o];a!==e.id&&plus.webview.close(a,"none",0)}if("browser"===e.__wap2app_parent_type){e.hide(t,i),e.evalJS("wap2app_browser.reset();");var r=e.children()[0];setTimeout(function(){e.remove(r),r.close("none")},i+100)}else setTimeout(function(){e.close(t,i)},e.__wap2app_group?50:0)},proto._handleBeforeBack=function(e){if(e&&(("function"==typeof e||_.isObject(e))&&(e=[e]),_.isArray(e)&&e.length))for(var t=0;t<e.length;t++){var i=e[t];if("function"==typeof i&&i()===!1)return!1;if(_.isObject(i))for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];"string"==typeof o&&(o={selector:o,eventType:"click"});var a=document.querySelectorAll(n);if(a&&a.length)for(var r=0;r<a.length;r++){var s=a[r];if(s&&"none"!==_.getStyles(s,"display")){var p=!1;if(p=o.selector?document.querySelector(o.selector):s)return wap2app.trigger(p,o.eventType),!1}}}}return!0},proto.open=function(e){wap2app.open(e)},proto.close=function(){var e=this.options.show,t=e.aniShow||"pop-in",i=e.duration||300;t=~t.indexOf("in")?t.replace("in","out"):t.replace("out","in"),this._handleBackClose(this.webview.parent()?this.webview.parent():this.webview,t,i)},proto.back=function(){var e=plus.storage.getItem(Const.W2A_WEBVIEW_LOADING+this.webview.id);if(!(e&&_.now()-parseInt(e,10)<5e3)){var t=this.options,i=t.back,n=(i.beforeBack,this._handleBeforeBack(i.beforeBack,s));if(n!==!1){var o=t.show,a=o.aniShow||"pop-in",r=o.duration||300;a=~a.indexOf("in")?a.replace("in","out"):a.replace("out","in");var s=this.webview.parent()?this.webview.parent():this.webview,p=i.history,l=!0;"boolean"==typeof p?l=p:p&&(l=_.isMatch(window.location,{pathname:p}));var c=!1;"function"==typeof i.handle&&(c=i.handle(s,l,t)),c===!1&&(l===!1?t.quit?this.quit():this._handleBackClose(s,a,r):this.webview.canBack(function(e){e.canBack?"spa"===t.mode?spa.back(a,r,function(e){history.back()},{showWaiting:i.showWaiting,delay:i.delay}):(this.webview.overrideUrlLoading({mode:"allow",match:Const.W2A_OVERRIDE_MATCH}),"browser"===s.__wap2app_parent_type&&s.evalJS("wap2app_browser.showClose();"),setTimeout(function(){plus.storage.setItem(Const.W2A_WEBVIEW_BACKING,"TRUE"),this.webview.back()}.bind(this),50)):t.quit?this.quit():this._handleBackClose(s,a,r)}.bind(this))),i.reload&&setTimeout(function(){this._handleBackReload(i.reload)}.bind(this),100)}}},proto._handleBackReload=function(e){if("function"==typeof e&&(e=e(location.pathname,location)),"boolean"==typeof e?this.opener&&e&&(e=[this.opener.id]):"string"==typeof e&&(e=[e]),_.isArray(e)&&e.length)for(var t=0;t<e.length;t++)wap2app.reload(e[t])},proto.quit=function(){this._first?(new Date).getTime()-this._first<2e3&&plus.runtime.quit():(this._first=(new Date).getTime(),plus.nativeUI.toast("string"==typeof this.options.quit?this.options.quit:"\u518d\u6309\u4e00\u6b21\u9000\u51fa\u5e94\u7528"),setTimeout(function(){this._first=null}.bind(this),2e3))},module.exports=W2AWebview},function(e,t,i){var n=i(5),o=i(15),a=["\u786e\u5b9a","\u53d6\u6d88"],r=!1;e.exports={isEnabled:function s(e,t){if("iOS"===plus.os.name)return!0;if(!r){var s=!0;try{var i=plus.android.runtimeMainActivity(),n=i.getSystemService("location"),p=plus.android.importClass(n),l=n.isProviderEnabled(p.GPS_PROVIDER);l||(s=!1)}catch(c){s=!1}return s||("function"==typeof e&&(t=e,e=""),(e||t)&&(e=e||"\u672c\u673a\u672a\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd\uff0c\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd","Android"===plus.os.name&&(r=!0,plus.nativeUI.confirm(e,function(e){0===e.index?(o.openLocationSource(),t&&t()):r=!1},"\u63d0\u793a",a)))),s}},checkPermission:function(e,t,i){if("iOS"===plus.os.name)return!0;if(!r){var s=!0;try{var p=plus.android.runtimeMainActivity(),l=plus.android.importClass("android.os.Build"),c=(plus.android.importClass("android.provider.Settings"),plus.android.importClass("android.content.Context"));if(l.VERSION.SDK_INT>=19){var d=p.getSystemService(c.APP_OPS_SERVICE),h=plus.android.importClass(d),u=p.getPackageManager();plus.android.importClass(u);var w=u.getPackageInfo(p.getPackageName(),0),f=plus.android.getAttribute(plus.android.getAttribute(w,"applicationInfo"),"uid"),v=p.getPackageName(),_=d.checkOp(h.OPSTR_COARSE_LOCATION,f,v);if(_!=h.MODE_ALLOWED){var b;b=plus.android["implements"]("android.app.AppOpsManager$OnOpChangedListener",{onOpChanged:function(t,i){var n=d.checkOp(h.OPSTR_COARSE_LOCATION,f,v);t==h.OPSTR_COARSE_LOCATION&&n==h.MODE_ALLOWED&&(e&&e(),d.stopWatchingMode(b))}}),d.startWatchingMode(h.OPSTR_COARSE_LOCATION,v,b),s=!1}}}catch(m){console.log(m)}return s||("function"==typeof t&&(i=t,t=""),(t||i)&&(t=t||"\u5c1a\u672a\u8d4b\u4e88\u83b7\u53d6\u4f4d\u7f6e\u7684\u6743\u9650\u3002\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\uff0c\u7ed9{app}\u8d4b\u4e88\u5b9a\u4f4d\u6743\u9650",plus.runtime.getProperty(plus.runtime.appid,function(e){var s=e.name;n.qihoo?s="360\u624b\u673a\u52a9\u624b":n.stream&&(s="\u6d41\u5e94\u7528"),t=t.replace("{app}",s),"Android"===plus.os.name&&(r=!0,plus.nativeUI.confirm(t,function(e){0===e.index?(o.openApplicationDetail(),i&&i()):r=!1},"\u63d0\u793a",a))}))),s}}}},function(e,t,i){var n,o,a,r,s=i(5),p=function(){s.android&&(n=plus.android.runtimeMainActivity(),o=plus.android.importClass("android.content.Intent"),a=plus.android.importClass("android.provider.Settings"),r=plus.android.importClass("android.net.Uri"))};e.exports={openLocationSource:function(){n||p(),n&&n.startActivity(new o(a.ACTION_LOCATION_SOURCE_SETTINGS))},openApplicationDetail:function(){n||p(),n&&n.startActivity(new o(a.ACTION_APPLICATION_DETAILS_SETTINGS,r.parse("package:"+n.getPackageName())))},openAirPlaneModeSetting:function(){n||p(),n&&n.startActivity(new o(a.ACTION_AIRPLANE_MODE_SETTINGS))}}},function(e,t,i){var n=i(4),o=i(15),a=i(10),r=i(12),s=function(e,t,i){t||(t=e,e=!1),this._init(t),this._create(i)},p=s.prototype;p._init=function(e,t){this.opener=!1,this.webview=!1,this.relatedView=!1,this.titleUpdateTimer=!1,this.backing=!1,this.showing=!1,this.loaded=!1,this.options=e},p._create=function(e){n.plusReady(function(){this._hasNetwork()&&this._createWebview(e)}.bind(this))},p._createWebview=function(e){var t=this.options;if(this.opener=plus.webview.getWebviewById(e),this.webview=plus.webview.getWebviewById(t.id),plus.storage.removeItem(a.W2A_WEBVIEW_RELOAD+t.id),this.webview){var i=!!this.webview.__wap2app_group,o=!i;if(o&&this._prepareLoading(),t.url){var r=!1;"boolean"!=typeof t.reload?r=n.isMatch(n.getLocation(t.url),{pathname:t.reload}):(t.reload||t.url!==this.webview.getURL())&&(r=!0),r&&(this.webview.overrideUrlLoading({mode:"allow",match:a.W2A_OVERRIDE_MATCH}),setTimeout(function(){this.webview.loadURL(t.url)}.bind(this),50));var s=plus.webview.currentWebview().id===t.id;if(s)plus.nativeUI.closeWaiting();else{var p=t.show,l=i?"none":p.aniShow,c=i?0:p.duration,d=this.webview.parent()?this.webview.parent():this.webview;"browser"===d.__wap2app_parent_type&&this.webview.clear(),d.hide("none"),setTimeout(function(){d.show(l,c,function(){plus.nativeUI.closeWaiting()}.bind(this))}.bind(this),50)}}}else{var h=!1,u=t.extras.__wap2app_group;if(u){var w=this.opener.__wap2app_group;if(!w){var f=wap2app.getHomeWebviewOptions();this.opener.id!==plus.runtime.appid&&this.opener.id!==f.id||(w=f.extras.__wap2app_group)}u===w&&(h=!0)}this._prepareLoading(),this.opener.id===t.id||h||("browser"!==t.parent&&this._createScreenShot(),this._createParent()),plus.storage.setItem(a.W2A_WEBVIEW_LOADING+this.opener.id,""+n.now()),t.extras.__wap2app_opener_id=e,this.webview=plus.webview.create(t.url,t.id,t.styles,t.extras),this.webview.overrideUrlLoading({mode:"allow",match:a.W2A_OVERRIDE_MATCH},function(e){}.bind(this)),h&&this._createGroupScreenshot(),this._hasParentWebview()&&(this.webview.hide(),this.relatedView.append(this.webview)),this._initPlusWebview()}},p._initPlusWebview=function(){var e=this.options;this.webview.appendJsFile("_www/__wap2app.js"),this.webview.appendJsFile("_www/__wap2appconfig.js");var t=e.appendJsFile;if("string"==typeof t&&t&&(t=[t]),n.isArray(t))for(var i=0,o=t.length;o>i;i++)t[i]&&this.webview.appendJsFile("_www/"+t[i]);if(this._handleEvent(),e.pullToRefresh&&e.pullToRefresh.support){var a=e.pullToRefresh.callback;this.webview.setPullToRefresh(e.pullToRefresh,function(){a?a(this.webview):(this.webview.endPullToRefresh(),wap2app.reload(this.webview.id))}.bind(this))}},p._hasParentWebview=function(){return this.relatedView&&"parent"===this.relatedView.__wap2app_type},p._hasScreenshot=function(){return this.relatedView&&"screenshot"===this.relatedView.__wap2app_type},p._isBrowserWebview=function(){return this._hasParentWebview()&&"browser"===this.relatedView.__wap2app_parent_type},p._createGroupScreenshot=function(){if(n.supportNativeObj()){var e=this.options.group,t=plus.nativeObj.Bitmap.getBitmapById(a.W2A_BITMAP_ID);t&&(this.relatedView=new r(t.id,this.opener.id,e),this.relatedView.__wap2app_type="screenshot",this.relatedView.__wap2app_animate="group",this.relatedView.show("none",0,function(e){e||(this.relatedView=!1)}.bind(this)))}},p._createScreenShot=function(){var e=this.options.show,t=this.options.screenshot;if(t&&t.url){var i=t.url;i&&(n.supportNativeObj()?(this.relatedView=new r(i,this.opener.id,t),this.relatedView.__wap2app_type="screenshot",this.relatedView.show(e.aniShow,e.duration,function(e){e?plus.nativeUI.closeWaiting():(this.relatedView=!1,this._createScreenShotFallback(i,this.options.show))}.bind(this))):(this.relatedView=!1,this._createScreenShotFallback(i,this.options.show)))}},p._createScreenShotFallback=function(e,t){this.relatedView||(this.relatedView=plus.webview.getWebviewById(e),this.relatedView?this.relatedView.show(t.aniShow,t.duration,function(){plus.nativeUI.closeWaiting(),this._showW2AViewFallback()}.bind(this)):(this.relatedView=plus.webview.create("_www/"+e,e,null,{__wap2app_type:"screenshot"}),this.relatedView.addEventListener("titleUpdate",function(){this.relatedView.show(t.aniShow,t.duration,function(){plus.nativeUI.closeWaiting(),this._showW2AViewFallback()}.bind(this))}.bind(this))))},p._showW2AViewFallback=function(){if(n.supportNativeObj()){var e=this.relatedView;this._createScreenshotAnimation(function(t){t&&e.hide("none")}.bind(this))}},p._createParent=function(){var e=this.options.show,t=this.options.parent;if(t){var i=plus.webview.getWebviewById(a.W2A_BROWSER_ID);"browser"===t?(this.relatedView=i,this.relatedView.evalJS("wap2app_browser.loading();"),this.relatedView.show(e.aniShow,e.duration,function(){},{acceleration:"none"})):(this.relatedView=plus.webview.create("_www/"+t,this.options.id+"___wap2app_parent",{popGesture:"close",hardwareAccelerated:!0},{__wap2app_type:"parent"}),this.relatedView.addEventListener("titleUpdate",function(){this.relatedView.show(e.aniShow,e.duration)}.bind(this)))}return this.relatedView},p._hasNetwork=function(){var e=this.options.network;return e!==!1&&plus.networkinfo.getCurrentType()===plus.networkinfo.CONNECTION_NONE?(plus.nativeUI.confirm("\u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e",function(e){2===e.index?(o.openAirPlaneModeSetting(),plus.webview.currentWebview().reload()):1===e.index?plus.webview.currentWebview().reload():plus.runtime.quit()},"\u63d0\u793a",["\u9000\u51fa","\u91cd\u8bd5","\u8bbe\u7f6e\u7f51\u7edc"]),!1):!0},p._handleEvent=function(){this.titleUpdateTimer=setTimeout(function(){this._titleUpdate()}.bind(this),2e3),this.webview.addEventListener("loading",this._loading.bind(this)),this.webview.addEventListener(this.options.show.eventType,this._titleUpdate.bind(this)),this.loadedTimer=setTimeout(function(){this._loaded()}.bind(this),5e3),this.webview.addEventListener("loaded",this._loaded.bind(this))},p._prepareLoading=function(){this.loaded=!1,this.showing=!0;var e=this.options.showWaiting!==!1;e&&!this.backing&&setTimeout(function(){plus.nativeUI.showWaiting()},20)},p._loading=function(e){var t=!1;plus.storage.getItem(a.W2A_WEBVIEW_RELOAD+this.webview.id)?t=!0:plus.storage.getItem(a.W2A_WEBVIEW_BACKING)?plus.storage.removeItem(a.W2A_WEBVIEW_BACKING):this._prepareLoading(),"function"==typeof this.options.loading&&this.options.loading(this.webview,this.backing,t),this._isBrowserWebview()&&this.relatedView.evalJS("wap2app_browser.loading();")},p._createScreenshotAnimation=function(e){var t=this.options.screenshot,i=plus.nativeObj.Bitmap.getBitmapById(t.url);if(i){var n=this.relatedView;this.relatedView=new r(i.id,null,t),this.relatedView.__wap2app_type="screenshot",this.relatedView.__wap2app_animate="fallback",this.relatedView.show("none",0,function(t){t||(this.relatedView=n),e&&e(t)}.bind(this))}else e&&e(!1)},p._titleUpdate=function(e){var t=e.title;if(t&&"http"===t.substr(0,4)&&(t=""),!plus.storage.getItem(a.W2A_WEBVIEW_RELOAD+this.webview.id)){if(t)if(this._isBrowserWebview())this.relatedView.evalJS("wap2app_browser.setTitle('"+encodeURIComponent(t||"")+"');");else if(this.relatedView&&this.relatedView instanceof r&&this.options.screenshot.title&&this.options.screenshot.title.enable){var i=this.options.screenshot.title.filter;"function"==typeof i&&(t=i(t)),t&&this.relatedView.setTitle(t,this.webview)}var n=this.options,o=n.show;this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),this.titleUpdateTimer=!1,setTimeout(function(){if(this.showing){this.showing=!1;var e=this.relatedView?"none":o.aniShow,t=this.relatedView?0:o.duration;this._show(e,t),this.backing=!1}}.bind(this),n.delay)}},p._show=function(e,t){var i=this.options;this.webview.show(e,t,function(){if(plus.nativeUI.closeWaiting(),this.relatedView)if(this.relatedView instanceof r)if("group"===this.relatedView.__wap2app_animate){var e=i.group.animation;this.relatedView.close(e.type,e.duration,function(){this.nativeObjAnimated=!0}.bind(this))}else{var e=i.screenshot.animation;this.relatedView.close(e.type,e.duration)}else this._hasScreenshot()&&setTimeout(function(){this.relatedView.hide("none")}.bind(this),200)}.bind(this))},p._loaded=function(e){this.loadedTimer&&clearTimeout(this.loadedTimer),this.loadedTimer=!1,this.loaded=!0;var t=this.options;if("function"==typeof t.loaded&&t.loaded(this.webview,this.backing),!plus.storage.getItem(a.W2A_WEBVIEW_RELOAD+this.webview.id)){if(this.relatedView&&this.relatedView instanceof r){var i=0;t.screenshot&&t.screenshot.animation&&t.screenshot.animation.delay&&(i=t.screenshot.animation.delay),setTimeout(function(){this.relatedView.clear()}.bind(this),i)}this._isBrowserWebview()&&this.relatedView.evalJS("wap2app_browser.loaded();")}},e.exports=s}]);